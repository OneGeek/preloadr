function preloadr(a,b,c,d){d="undefined"!=typeof d?d:!1;var e,f=a instanceof Array?[]:{},g=[];for(e in a)g.push(e);if(g.length){var h=nbToLoad=0,i="function"==typeof b;for(e=0;e<g.length;e++)nbToLoad++,f[g[e]]=new Image,f[g[e]].onload=f[g[e]].onerror=f[g[e]].onabort=function(b){return function(){j(f[g[b]],function(){return d&&b<g.length-1?function(){var c=g[b+1];f[c].src=a[c]}:null}())}}(e),d||(f[g[e]].src=a[g[e]]);d&&(f[g[0]].src=a[g[0]]);var j=function(a,d){i&&b(a),d&&"function"==typeof d&&d(),++h>=nbToLoad&&"function"==typeof c&&c(f)}}}